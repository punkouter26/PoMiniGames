import{r,S as v,f as L,W as z,A as C,h as g,d as P,j as A}from"./index-e522FiC1.js";import{c as S}from"./ragdolls-USQMMoJR.js";function y({racerType:l,isSelected:b}){const s=r.useRef(null),R=r.useRef(null),m=r.useRef(0);return r.useEffect(()=>{if(!s.current)return;const t=s.current,a=t.clientWidth,c=t.clientHeight;if(a===0||c===0)return;const i=new v,o=new L(40,a/c,.1,100);o.position.set(0,1.2,4),o.lookAt(0,.2,0);const e=new z({antialias:!0,alpha:!0});e.setSize(a,c),e.setPixelRatio(Math.min(window.devicePixelRatio,2)),e.setClearColor(0,0),t.appendChild(e.domElement),R.current=e;const x=new C(6316128,2.5);i.add(x);const u=new g(16777215,3);u.position.set(3,8,5),i.add(u);const h=new g(4482815,1);h.position.set(-3,2,-5),i.add(h);const f=S(i,null,{x:0,y:0,z:0},l,{noPhysics:!0}),E=new P,w=()=>{m.current=requestAnimationFrame(w);const n=E.getElapsedTime();f.root.position.y=Math.sin(n*1.5)*.08,f.root.rotation.y=Math.sin(n*.8)*.15,e.render(i,o)};w();const p=()=>{if(!t||!e)return;const n=t.clientWidth,d=t.clientHeight;n===0||d===0||(o.aspect=n/d,o.updateProjectionMatrix(),e.setSize(n,d))};return window.addEventListener("resize",p),()=>{cancelAnimationFrame(m.current),window.removeEventListener("resize",p),t.contains(e.domElement)&&t.removeChild(e.domElement),e.dispose()}},[l]),A.jsx("div",{ref:s,style:{width:"100%",height:"100%"}})}export{y as default};
